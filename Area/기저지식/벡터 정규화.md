- 벡터 정규화(normalization)는 벡터의 방향은 유지하면서 그 **길이(크기, magnitude)**를 1로 만드는 과정이다
- 정규화된 벡터는 **단위 벡터(unit vector)**라고도 불리며, 주로 방향 정보를 필요로 하는 계산에서 유용하게 사용된다

예시 코드 :

```python
class Vector:

    def __init__(self, x=0.0, y=0.0):

        self.x = x

        self.y = y

    def normalize(self):

        length = self.length()

        if length > 0:

            self.x /= length

            self.y /= length

        return self
```

---

### 1. **벡터 정규화의 정의**
벡터 $(\vec{v} = (x, y)$가 주어졌을 때, 정규화된 벡터 $(\hat{v})$는 다음과 같이 계산된다 :
$$
\hat{v} = \frac{\vec{v}}{||\vec{v}||}
$$

여기서:
- $\vec{v}$ : 원래 벡터
- $||\vec{v}||$ : 벡터의 길이 (magnitude)
	-  $||\vec{v}|| = \sqrt{x^2 + y^2}$
- $\hat{v}$ : 길이가 1인 단위 벡터

정규화는 벡터의 각 성분$x$, $y$를 벡터의 길이로 나누는 방식으로 수행된다

결과적으로 정규화된 벡터는 :
- **방향** : 원래 벡터와 동일
- **길이** : 항상 1

---

### 2. **GameAI Vector 클래스 속 정규화**
`Vector` 클래스의 `normalize` 메서드는 다음과 같다

```python
def normalize(self):
    length = self.length()
    if length > 0:
        self.x /= length
        self.y /= length
    return self
```

#### **동작 방식**
1. **길이 계산** :
   - `self.length()`를 호출해 벡터의 길이 $\sqrt{x^2 + y^2}$를 계산한다
   - 예: 벡터 $\vec{v} = (3, 4)$라면, 길이는 $\sqrt{3^2 + 4^2} = \sqrt{9 + 16} = 5$

1. **길이 확인** :
   - `if length > 0`: 벡터의 길이가 0인 경우
	   - 예: $\vec{v} = (0, 0)$ 나누기 오류를 방지하기 위해 처리하지 않는다
   - 길이가 0인 벡터는 방향이 정의되지 않으므로 정규화할 수 없다
	   - ~~길이가 0인 벡터는 그냥 점임을 기억하라~~

1. **성분 나누기** :
   - `self.x /= length` : $x$ 좌표를 길이로 나눈다
   - `self.y /= length` : $y$ 좌표를 길이로 나눈다
   - 예 : $\vec{v} = (3, 4)$라면, 정규화 후 :
     $$
     \hat{v} = \left( \frac{3}{5}, \frac{4}{5} \right) = (0.6, 0.8)
     \
      $$
     이 벡터의 길이를 확인하면:
     $$
     \sqrt{0.6^2 + 0.8^2} = \sqrt{0.36 + 0.64} = \sqrt{1} = 1
     $$

4. **객체 수정 및 반환**:
   - `self.x`, `self.y`를 직접 수정하므로 원본 벡터가 변경된다
   - `return self`로 수정된 객체를 반환한다
	   - 원본 벡터가 변경한 체로 반환하기 때문에 기존 값을 유지하고 싶다면, 후술한 특징 부분과 주의사항.원본 보존을 확인하라

#### **특징**
- **파괴적(destructive)**: `normalize()`는 벡터 객체 자체를 수정한다
- 원본을 보존하려면 복사본을 만들어 사용해야 한다
- 예:
  ```python
  v = Vector(3, 4)
  v.normalize()  # v는 이제 (0.6, 0.8)
  ```

---

### 3. **정규화의 수학적 의미**
정규화된 벡터는 다음과 같은 속성을 가진다 :
- **길이** : $\sqrt{x^2 + y^2} = 1$
- **방향 유지** : 원래 벡터와 동일한 방향을 가리킨다
- **단위 벡터** : 방향 정보만을 나타내며, 벡터의 길이가 1로 고정되어 크기 정보는 제거된다

- 예시 :
	- 벡터 $\vec{v} = (3, 4)$의 방향은 정규화 후에도 여전히 같은 각도(약 53.13°, 즉 $\tan^{-1}(4/3)$)를 유지하지만, 길이는 5에서 1로 바뀐다
	- 즉 $\vec{v} = (3, 4)$의 방향 정보를 정규화를 통해 얻을 수 있다는 것이다

---

### 4. **정규화의 활용**
벡터 정규화는 다양한 분야에서 사용된다 :
1. **게임 프로그래밍**:
   - 캐릭터나 물체의 이동 방향을 계산할 때 단위 벡터를 사용한다
	   - 예: 플레이어가 특정 방향으로 속도 $s$만큼 이동하려면, 방향 벡터를 정규화한 뒤 속도를 곱한다 :
     $$
     \text{이동 벡터} = \text{단위 방향 벡터} \times s
    $$

1. **컴퓨터 그래픽스** :
   - 조명 계산에서 법선 벡터(normal vector)를 정규화하여 빛의 반사를 정확히 계산 가능하다
   - 카메라 시점 방향을 나타낼 때도 단위 벡터가 사용된다

1. **물리 시뮬레이션** :
   - 힘의 방향을 나타낼 때 정규화된 벡터를 사용한다
	   - 예 : 중력이나 전자기력의 방향을 단위 벡터로 표현하고, 크기를 스칼라로 조절

1. **기계 학습** :
   - 데이터 정규화(특히 벡터 형태의 입력 데이터)에서 벡터의 크기를 1로 맞춰 비교 가능하게 한다

---

### 5. **주의사항**
1. **0 벡터 처리**:
   - 길이가 0인 벡터는 정규화할 수 없다. 코드에서는 이를 `if length > 0`으로 처리했지만, 필요에 따라 예외 처리를 하거나 기본값을 설정할 수 있다.

2. **원본 보존**:
   - `normalize`는 벡터를 직접 수정한다
   - 원본을 유지하려면 새 벡터를 반환하는 방식으로 수정 가능하다 :

     ```python
     def normalize_copy(self):
         length = self.length()
         if length > 0:
             return Vector(self.x / length, self.y / length)
         return Vector(self.x, self.y)
     ```

3. **부동소수점 오차**:
   - 컴퓨터의 부동소수점 연산은 미세한 오차를 유발할 수 있다
   - 정규화 후 길이가 정확히 1이 아닐 수도 있다
	   - 벡터 정규화 과정이 중요한 경우 길이를 다시 확인하는 과정을 취하는 것이 좋다

---

### 6. **정규화 예시**
`Vector` 클래스를 사용한 예시이다 :

```python
import math

v = Vector(3, 4)
print(v.length())  # 5.0

v.normalize()
print(v.x, v.y)  # 0.6, 0.8
print(v.length())  # 1.0 (약간의 부동소수점 오차 가능)
```

정규화 후 벡터 $\vec{v} = (0.6, 0.8)$ :
- 원래 방향(53.13°)을 유지
- 길이가 1임을 확인 가능

---

### 7. **확장 가능성**
정규화와 관련해 추가로 구현할 수 있는 기능 :
- **내적(dot product)**: 두 벡터의 각도를 계산할 때 정규화된 벡터를 사용하면 편리하다

  ```python
  def dot(self, other):
      return self.x * other.x + self.y * other.y
  ```

- **각도 계산**: 정규화된 벡터를 사용해 두 벡터 사이의 각도를 구할 수 있다 :
  $$
  \cos \theta = \frac{\vec{v} \cdot \vec{w}}{||\vec{v}|| \cdot ||\vec{w}||}
  $$
	- 벡터가 정규화 됐기에 분모가 1이므로 계산이 간단해진다

---

### 요약
- **정규화란**: 벡터의 길이를 1로 만들며 방향은 유지하는 과정
- **코드의 동작**: `normalize`는 벡터의 `x`, `y`를 길이로 나눠 단위 벡터로 만들고, 객체 자체를 수정
- **활용**: 방향 정보가 필요한 게임, 그래픽스, 물리, 기계 학습 등에서 필수
- **주의**: 0 벡터 처리, 원본 보존, 부동소수점 오차를 고려